"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[168],{57690:function(e,r,t){t.d(r,{v:function(){return a}});var n=t(85893),o=t(67294),l=t(76627),i=t.n(l);function a(e){let[r,t]=(0,o.useState)(!1);return((0,o.useEffect)(()=>{t(!0)},[]),r)?(0,n.jsx)(i(),{...e}):null}},39310:function(e,r,t){t.d(r,{ec:function(){return A},cI:function(){return a},ae:function(){return O}});var n=t(95496),o=t(87536),l=t(80478),i=t.n(l);let a=e=>{let{name:r,validationSchema:t,defaultValues:l}=e,a=(0,o.cI)({resolver:(0,n.X)(t),mode:"onTouched",defaultValues:l});return i()(r,a),a};var s=t(74075),c=t(87465),u=t(78958),d=t(72946),m=t(68438),f=t(77853),h=t(69018),g=t(61954),p=t(85945),x=t(48228),v=t(11163),S=t(45596),I=t(50259),b=t(13907),y=t(62592);let _=e=>{try{let r=localStorage.getItem(e);if(!r)return{};return JSON.parse(r)}catch(e){return console.error("Error retrieving data from local storage:",e),{}}},T=(e,r)=>{try{let t=JSON.stringify(r);localStorage.setItem(e,t)}catch(e){console.error("Error saving data to local storage:",e)}},E=(e,r)=>{let t=_(e),n=(0,y.Z)(t,r);T(e,n)},N=e=>{let r=()=>{let r=localStorage.getItem(e);return r?JSON.parse(r):null},t=r=>{let t=JSON.stringify(r);localStorage.setItem(e,t)},n=()=>!(0,S.Z)(localStorage.getItem(e));return{hasStoredLead:n,getStoredLead:r,saveLead:t}},A=e=>{let{saveLead:r,getStoredLead:t}=N(f.HM),{storeType:n,customStoreSlug:o,flow:l}=(0,g.MR)(),{executeRecaptcha:i}=(0,I.xX)(),[a,y]=(0,b.Z)(f.Tz),_=(0,p.NL)(),{getRoutes:T}=(0,g.lT)(),A=(0,v.useRouter)(),{isActive:w}=(0,c.aq)({fasterSchemaName:c.oQ.SHOULD_ENABLE_AUTHENTICATED_REGISTRATION_FLOW}),Z=(e,r,t)=>u.x.patch("/v2".concat(m.w0[r],"/leads/").concat(null==e?void 0:e.id),t),j=(e,r,t)=>u.x.post("/v2".concat(m.w0[r],"/leads"),e,{headers:{"Recaptcha-Token":t}}),O=async e=>{var r,a;if(!i){null==TrackJS||TrackJS.track("recaptchaError");return}let s=await i(),c=t(),u=null!==(r=e.flowType)&&void 0!==r?r:l,d=(0,S.Z)(c),g=!d&&u!==c.flow,p=JSON.parse(null!==(a=localStorage.getItem(f.Jo))&&void 0!==a?a:"{}"),x=(0,h.A_)(n,o),v=(0,h.HJ)(e,x,p),I=u===m.kn.restaurante&&w;if(d||g){if(y(u),I){E(f._x,{signInFields:v});let e={register:JSON.stringify({signinFields:v}),_persist:'{"version":-1,"rehydrated":true}'};localStorage.setItem("persist:self-siginin/store",JSON.stringify(e));let r={pathname:T(I).REGISTER.STORE_DATA.PATHNAME,query:{storeType:m.Gr[u]}};A.push(r);return}return j(v,u,s)}return Z(c,u,v)},R=(0,x.D)(O,{onSuccess:(e,t)=>{var n;_.setQueryData([f.HM],e);let o=null!==(n=t.flowType)&&void 0!==n?n:l,i=(0,h.Wc)(null==e?void 0:e.data),a=o===m.kn.restaurante&&w,c={...null==e?void 0:e.data,flow:o};r(c),c.id&&(0,s.NI)(d.m$.LEAD_ID,c.id),c.isNewLead&&(0,s.AY)(c.isNewLead);let u={register:JSON.stringify({signinFields:i}),_persist:'{"version":-1,"rehydrated":true}'};localStorage.setItem("persist:self-siginin/store",JSON.stringify(u));let g={pathname:T(a).REGISTER.STORE_DATA.PATHNAME,query:{storeType:m.Gr[o]}};A.push(g)},onError:r=>{null==TrackJS||TrackJS.track(r),(0,s.qP)(e,d.aO.FAILURE,d.wS.START_REGISTRATION_ERROR)}});return{leadAuthMutation:R}};var w=t(18132),Z=t(74231);let j={onlyNumbers:/^[0-9]+$/,atLeastTwoWords:/(\w.+\s).+/i,phones:{brazilMobilePhone:/^(?:(?:\+|00)?(55)\s?)?(?:\(?([1-9][0-9])\)?\s?)(?:((?:9\d|[2-9])\d{3})\-?(\d{4}))$/}},O=()=>{let{t:e}=(0,w.$)(["common"]),r=Z.Ry().shape({fullName:Z.Z_().matches(j.atLeastTwoWords,e("common:formValidation.name")).required(e("common:formValidation.required")),email:Z.Z_().email(e("common:formValidation.email")).required(e("common:formValidation.required")),mobilePhone:Z.Z_().matches(j.phones.brazilMobilePhone,e("common:formValidation.mobilePhone")).required(e("common:formValidation.required"))}),t=a({name:f.gw,validationSchema:r,defaultValues:{fullName:"",email:"",mobilePhone:""}});return t}},69018:function(e,r,t){t.d(r,{A_:function(){return g},CB:function(){return S},HJ:function(){return I},Km:function(){return o},Wc:function(){return T}});var n,o,l=t(7226),i=t(50774),a=t(45596),s=t(8598),c=t(75838),u=t(33287),d=t(91450),m=t(75528),f=t(98553),h=t(77853);let g=(e,r)=>(0,i.Z)(r)?e:"".concat(e,"/").concat(r),p=e=>h.jY.reduce((r,t)=>{if("bid"===t&&e.buzzLeadId)return{...r,buzzLeadId:e.buzzLeadId};let n=(0,l.eV)(t);return e[t]?{...r,[n]:e[t]}:r},{});(n=o||(o={}))[n.month=0]="month",n[n.days=1]="days";let x={[o.month]:"1 m\xeas",[o.days]:"30 dias"},v=e=>(0,a.Z)(e)||(0,a.Z)(e.promotionalValue)||(0,a.Z)(e.promotionalDuration),S=(e,r)=>v(e)?(0,s.Z)([[e=>{let{promotionalValue:r}=e;return(0,c.Z)(0,r)},e=>{let{promotionalDuration:t}=e;return(0,c.Z)(t,1)?x[r]:"".concat(t," meses")}],[u.Z,()=>x[r]]])(e):x[r],I=(e,r,t)=>{var n;let o=null===(n=e.fullName)||void 0===n?void 0:n.trim().split(" "),l=null==o?void 0:o.splice(0,1).join(""),i=null==o?void 0:o.join(" "),a=e.mobilePhone.replace(/\s/g,""),s=f.C.APP_VERSION,c=t?p(t):{},u=(0,d.Z)(e,c),m={...u,firstName:l,lastName:i,lpStoreSlug:r,mobilePhone:a,phone:a,applicationOrigin:"Form C",applicationVersion:s};return m},b=e=>{let r="".concat(e.slice(0,5),"-").concat(e.slice(5));return r},y=e=>h.CA[e],_=e=>!0===e?"yes":"no",T=e=>{let r;let{taxResponsibilityType:t,firstName:n,lastName:o}=e,l="".concat(n," ").concat(o);return Object.keys(e).forEach(t=>{let n=y(t);if(n){let o="".concat(n);r="savingsAccount"===o?e[t].toString():"postalCode"===o?b(e[t]):h.Q5.includes(o)?_(e[t]):e[t],e=(0,m.Z)({[o]:r},e)}}),{...e,taxResponsibilityType:t,fullName:l}}},7168:function(e,r,t){t.d(r,{a:function(){return E}});var n=t(85893),o=t(21298),l=t(45596),i=t(67294),a=t(50259),s=t(87536),c=t(18132),u=t(74075),d=t(57690),m=t(98553),f=t(72946),h=t(39310),g=t(7297),p=t(186),x=t(50503);function v(){let e=(0,g.Z)(["\n  margin-right: ",";\n  width: 100%;\n  label {\n    font-size: ",";\n    font-weight: 700;\n    color: ",";\n  }\n"]);return v=function(){return e},e}function S(){let e=(0,g.Z)(["\n  justify-content: flex-start;\n  align-items: flex-start;\n  padding-left: 0;\n  padding-bottom: 32px;\n  width: 100%;\n  height: 100%;\n"]);return S=function(){return e},e}function I(){let e=(0,g.Z)(["\n      @media (max-width: ",") {\n        padding: 0px 20px;\n        border: solid 1px ",";\n      }\n    "]);return I=function(){return e},e}function b(){let e=(0,g.Z)(["\n  border-radius: 6px;\n\n  ","\n"]);return b=function(){return e},e}let y=(0,p.ZP)(o.kC).withConfig({componentId:"sc-eeaed248-0"})(v(),e=>{let{theme:r}=e;return r.space.larger},e=>{let{theme:r}=e;return r.fontSizes.s},e=>{let{theme:r}=e;return r.colors.black}),_=(0,p.ZP)(x.W).withConfig({componentId:"sc-eeaed248-1"})(S()),T=(0,p.ZP)(x.W).withConfig({componentId:"sc-eeaed248-2"})(b(),e=>{let{bg:r,theme:t}=e;return!r&&(0,p.iv)(I(),t.breakpoints.m,t.colors.grayLight)}),E=e=>{let{eventCategory:r,textAlign:t="flex-start",content:g}=e,{control:p,handleSubmit:x}=(0,h.ae)(),{t:v}=(0,c.$)(["register"]),{executeRecaptcha:S}=(0,a.xX)(),{leadAuthMutation:I}=(0,h.ec)(r),b=I.isLoading&&Boolean(m.C.RECAPTCHA_SITE_KEY)&&(0,l.Z)(S),E={fullName:"fullName",email:"email",mobilePhone:"phoneNumber"},N=e=>{(0,u.qP)(r,f.aO.FILL_FIELD,E[e])},A=(0,i.useCallback)(async e=>{I.mutate(e)},[I]);return(0,n.jsxs)(T,{flexDirection:"column",justifyContent:"center",alignItems:t,width:{_:"312px",m:"1008px"},children:[(0,n.jsx)(o.X6,{fontSize:{_:"l",m:"xl"},mb:"smaller",textAlign:"center"==t?"center":"inherit",children:g?g.title:"Ainda n\xe3o \xe9 um parceiro iFood?"}),(0,n.jsx)(o.xv,{fontSize:{_:"s",m:"txl"},pt:20,textAlign:"center"==t?"center":"inherit",children:g?g.description:"Entre e ganhe 1 m\xeas de mensalidade gr\xe1tis!"}),(0,n.jsx)("form",{onSubmit:x(A),children:(0,n.jsxs)(_,{flexDirection:{_:"column",m:"row"},children:[(0,n.jsx)(y,{py:{_:"small",m:"larger"},pt:{_:"larger"},children:(0,n.jsx)(s.Qr,{name:"fullName",control:p,render:e=>{var r;let{field:t,fieldState:l}=e;return(0,n.jsx)(o.II,{...t,type:"text",label:"Nome completo",placeholder:"Jo\xe3o da Silva",error:null===(r=l.error)||void 0===r?void 0:r.message,onBlur:()=>N(t.name)})}})}),(0,n.jsx)(y,{py:{_:"smallest",m:"larger"},children:(0,n.jsx)(s.Qr,{name:"email",control:p,render:e=>{var r;let{field:t,fieldState:l}=e;return(0,n.jsx)(o.II,{...t,type:"email",label:"E-mail",placeholder:"email@email.com.br",error:null===(r=l.error)||void 0===r?void 0:r.message,onBlur:()=>N(t.name)})}})}),(0,n.jsx)(y,{py:{_:"smallest",m:"larger"},children:(0,n.jsx)(s.Qr,{name:"mobilePhone",control:p,render:e=>{var r;let{field:{ref:t,name:l,...i},fieldState:a}=e;return(0,n.jsx)(d.v,{mask:v("register:restaurante.initial.form.mobilePhone.mask"),...i,onBlur:()=>N(l),children:(0,n.jsx)(o.II,{ref:t,name:l,type:"tel",label:"Celular (com DDD)",placeholder:"(99) 99999-9999",error:null===(r=a.error)||void 0===r?void 0:r.message})})}})}),(0,n.jsx)(y,{mt:{_:"larger",m:"loose"},children:(0,n.jsx)(o.zx,{height:"50px",mt:"3px",width:"inherit",type:"submit","data-testid":"submitButton",disabled:b,isLoading:I.isLoading,children:v("register:restaurante.initial.submit")})})]})})]})}}}]);